<!DOCTYPE html>
<html>
<head>
    <title>API Test Page</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug { background: yellow; padding: 10px; margin: 10px 0; border: 1px solid orange; }
        .success { background: lightgreen; padding: 10px; margin: 10px 0; border: 1px solid green; }
        .error { background: lightcoral; padding: 10px; margin: 10px 0; border: 1px solid red; }
    </style>
</head>
<body>
    <h1>API Test Page</h1>
    <p>Testing API connection and data display...</p>
    
    <div id="status" class="debug">Loading...</div>
    <div id="result"></div>

    <script>
        console.log('Starting API test...');
        
        // Test direct API call
        fetch('http://localhost:3002/api/samples/1/')
            .then(response => {
                console.log('Response status:', response.status);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log('API Response:', data);
                
                document.getElementById('status').innerHTML = '<strong>SUCCESS:</strong> API call completed';
                document.getElementById('status').className = 'success';
                
                let html = '<div class="success">';
                html += '<h3>Sample Data:</h3>';
                html += '<p><strong>ID:</strong> ' + data.id + '</p>';
                html += '<p><strong>Sample Number:</strong> ' + data.original_sample_number + '</p>';
                
                if (data.growth_media) {
                    html += '<h4>Growth Media:</h4>';
                    html += '<p><strong>Type:</strong> ' + typeof data.growth_media + '</p>';
                    html += '<p><strong>Is Array:</strong> ' + Array.isArray(data.growth_media) + '</p>';
                    html += '<p><strong>Length:</strong> ' + data.growth_media.length + '</p>';
                    html += '<p><strong>Raw Data:</strong> ' + JSON.stringify(data.growth_media) + '</p>';
                    
                    if (Array.isArray(data.growth_media) && data.growth_media.length > 0) {
                        html += '<h5>Media List:</h5><ul>';
                        data.growth_media.forEach((media, index) => {
                            html += '<li>Index ' + index + ': ' + media.name + ' (ID: ' + media.id + ')</li>';
                        });
                        html += '</ul>';
                    }
                } else {
                    html += '<p><strong>Growth Media:</strong> Not found or null</p>';
                }
                
                html += '</div>';
                document.getElementById('result').innerHTML = html;
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('status').innerHTML = '<strong>ERROR:</strong> ' + error.message;
                document.getElementById('status').className = 'error';
                document.getElementById('result').innerHTML = '<div class="error">Failed to load data</div>';
            });
    </script>
</body>
</html>