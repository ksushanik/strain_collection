## Пересборка миграций `collection_manager`

### Проблема
- `collection_manager/migrations/0001_initial.py` создаёт собственные модели (`IndexLetter`, `Location`, `Source`, `Strain`, `Storage`, `Sample`), которые дублируют актуальные модели из `reference_data`, `strain_management`, `sample_management`, `storage_management`.
- При применении миграций на чистой базе появятся лишние таблицы и конфликты по именам.
- Последующие миграции (`0008+`) содержат фиксы синхронизации с боевой БД, что усложняет откат и поддержку.

### Цели
1. Исключить создание конфликтующих таблиц в новых окружениях.
2. Сохранить совместимость с базами, где `collection_manager` миграции уже были выполнены.
3. Задокументировать порядок применения миграций/фиктивных прогонов для prod/stage.

### Предлагаемая стратегия
1. **Создать новую миграцию `0017_detach_legacy_models`**:
   - Использовать `migrations.SeparateDatabaseAndState` для удаления моделей `IndexLetter`, `Location`, `Source`, `Strain`, `Storage`, `Sample` из state приложения.
   - В блоке `database_operations` оставить `migrations.RunPython(noop)`, чтобы не трогать существующие таблицы (их удаление выполнится на отдельном шаге).
2. **Добавить миграцию `0018_cleanup_legacy_tables`**:
   - В `RunPython` проверить существование таблиц `collection_manager_*`, если они есть — аккуратно удалить (предварительно сделать резервную копию).
   - Для продакшна задокументировать ручной шаг (`DROP TABLE` после проверки бэкапа).
3. **Обновить `collection_manager/apps.py`**:
   - Добавить `default_auto_field`, убрать упоминания устаревших моделей (если есть).
4. **Документация**:
   - Шаги деплоя: `python manage.py migrate audit_logging`, затем `collection_manager`.
   - Инструкция для уже существующих окружений: перед применением миграции убедиться, что таблицы `collection_manager_*` пустые, сделать бэкап, удалить.
5. **Опционально**: после очистки выполнить `squashmigrations` для `collection_manager`, чтобы новая база получала только минимальный набор миграций (например, оставить 0001 пустой + новый пакет 0015-0018).

### Проверка
- `python manage.py makemigrations --check`
- `python manage.py migrate --plan`
- Локальный прогон миграций на клон БД (сделать перед релизом).
