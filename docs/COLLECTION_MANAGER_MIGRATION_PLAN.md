## Пересборка миграций `collection_manager`

### Проблема
- `collection_manager/migrations/0001_initial.py` создаёт собственные модели (`IndexLetter`, `Location`, `Source`, `Strain`, `Storage`, `Sample`), которые дублируют актуальные модели из `reference_data`, `strain_management`, `sample_management`, `storage_management`.
- При применении миграций на чистой базе появятся лишние таблицы и конфликты по именам.
- Последующие миграции (`0008+`) содержат фиксы синхронизации с боевой БД, что усложняет откат и поддержку.

### Цели
1. Исключить создание конфликтующих таблиц в новых окружениях.
2. Сохранить совместимость с базами, где `collection_manager` миграции уже были выполнены.
3. Задокументировать порядок применения миграций/фиктивных прогонов для prod/stage.

### Текущее состояние
- ✅ Добавлены миграции `0016_remove_legacy_models` и `0017_remove_sample_amylase_variant_delete_appendixnote_and_more`, устраняющие жёсткие `DROP TABLE` из прежних версий.
- ✅ `0018_move_changelog_to_audit` и `0019_cleanup_legacy_changelog` закрывают перенос и уборку журнала изменений.
- ✅ Создана squashed-миграция `0020_squashed_initial.py` (`replaces` для 0001–0019). Новые инсталляции больше не пытаются создать устаревшие таблицы `collection_manager`.

### Предлагаемая стратегия
1. **Проверка новых окружений**: прогнать `python manage.py migrate` на чистой БД и убедиться, что `collection_manager` не создаёт собственных таблиц.
2. **Документировать порядок применения**: на продакшн-средах миграции выполняются в режиме `--fake`, реальные удаления — только после ручной проверки резервных копий.
3. **Обновить `collection_manager/apps.py`** (если потребуется) и задокументировать зависимость от доменных приложений (`reference_data`, `sample_management`, `storage_management`, `strain_management`).
4. **После стабилизации**: запланировать удаление устаревших файлов миграций (0001–0019) в отдельном релизе после того, как все среды перейдут на squashed-вариант и данные архива будут зафиксированы.

### Проверка
- `python manage.py makemigrations --check`
- `python manage.py migrate --plan`
- Локальный прогон миграций на клон БД (сделать перед релизом).
