# Рекомендации по архитектуре и развитию

## Ключевые риски
- Файлы сохранились не в UTF-8, из-за чего отображаются некорректные строки и падают линтеры.
- Монолитные модули `backend/collection_manager/api.py` и `frontend/src/components/BulkOperationsPanel.tsx` объединяют бизнес-логику, трансформации и презентацию, что мешает тестированию и расширению.
- Линтер фиксирует 100+ ошибок (`npm run lint`), без их устранения невозможно настроить CI/CD.
- План Stage 2 (docker-compose, gateway, health-checks, CI/CD) не реализован — развёртывание остаётся ручным.

## Backend
- Ввести слой сервисов/юзкейсов: вынести бизнес-логику из DRF views и Pydantic схем в отдельные классы, оставить контроллеру только оркестрацию.
- Разбить `api.py` по доменам (команды/запросы), использовать DRF ViewSet + сериализаторы либо адаптер поверх Pydantic.
- Упорядочить зависимости: samples, strains, storage, reference — минимизировать перекрёстные импорты через интерфейсы и репозитории.
- Централизовать обработку ошибок (DRF exception handler), логирование через структурированные логи.
- Массовые операции перевести в фоновые задания (Celery/RQ) и добавить идемпотентность.
- Начать работу по Stage 2: docker-compose, health-checks, CI pipeline, API gateway/авторизация, мониторинг.

## Frontend
- Перейти к feature-sliced структуре: отделить data-хуки, сервисы и презентационные компоненты.
- Обернуть приложение в `QueryClientProvider` и заменить кастомные `useState`-hooks на `@tanstack/react-query` для данных.
- Разделить `types/index.ts` на модули (`samples/types.ts` и т.п.), включить строгую типизацию (noImplicitAny, eslint без отключений).
- Разбить крупные компоненты (BulkOperationsPanel, AdvancedFilters) на мелкие виджеты с чистыми пропсами, убрать `alert`/`window` из логики.
- Настроить i18n, пересохранить все `.ts/.tsx` в UTF‑8, завести словарь переводов.
- Добавить unit/integration тесты (React Testing Library, Storybook) для критичных компонентов и форм.

## Общие меры
- Конвертировать репозиторий в UTF‑8, добавить `.editorconfig` и pre-commit (eslint, prettier, black, mypy).
- Составить технический бэклог для устранения lint-ошибок и контролировать прогресс на ревью.
- Использовать OpenAPI/контрактные тесты между backend и frontend, чтобы изменения API не ломали клиент.
- Автоматизировать деплой: docker-compose для dev/prod, GitHub Actions (lint/test/build), мониторинг (Sentry/Prometheus) и alerting.
- Документировать архитектурные правила: допустимые зависимости, соглашения по неймингу, подход к миграциям и тестам.
